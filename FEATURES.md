# 食谱小助手 - 功能说明

## 🎯 核心设计理念

**减少操作步骤，即时反馈，无感知保存**

---

## 📱 主要功能

### 1. 今日执行

#### 快速打卡
<img src="docs/images/quick-check.png" width="300">

- **首页直接操作**：无需进入详情页，在卡片上直接打卡
- **进度一目了然**：每个餐次显示完成进度
- **自动保存**：打勾自动保存，无需手动点击

#### 餐次详情抽屉
<img src="docs/images/bottom-sheet.png" width="300">

- **底部滑出**：点击卡片从底部展开详情，不离开当前页
- **下滑关闭**：手势操作，自然流畅
- **套餐切换**：横向滑动切换不同食谱方案
- **一键全部完成**：快速标记整餐所有食物

#### 添加临时食物
<img src="docs/images/quick-add.png" width="300">

- **内联输入**：不打断体验，在当前页面直接添加
- **连续添加**：支持快速添加多个食物
- **自动聚焦**：弹出输入框自动聚焦

---

### 2. 用餐设置

#### 餐次管理
- 自定义餐次名称（早餐、午餐、晚餐、加餐等）
- 设置用餐时间
- 快速选择常用名称

#### 多套食谱
- 创建多套食谱方案（减脂、增肌、日常等）
- 为每个餐次配置不同食物和克数
- 设置默认方案
- 每日可灵活切换

---

### 3. 数据记录

#### 日历视图
<img src="docs/images/calendar.png" width="300">

- 月历形式展示历史记录
- 有数据的日期高亮显示
- 点击日期查看当日详情

#### 数据导出
- 导出 CSV（适合 Excel 分析）
- 导出 JSON（适合程序处理）
- 本地存储，隐私安全

---

### 4. 智能提醒

#### 到点通知
- 根据设置的时间自动提醒
- 支持网页通知和 Android 原生通知
- 提醒内容显示该餐食物清单

#### 通知优化
- 页面切换回前台时立即检查
- 防止重复通知
- 支持测试通知功能

---

## 🎨 交互亮点

### 进度可视化
| 组件 | 说明 |
|------|------|
| 顶部进度环 | 今日整体完成百分比 |
| 卡片进度 | 单个餐次完成情况 |
| 完成标记 | 已保存、已完成状态标识 |

### 手势操作
- **下滑关闭抽屉**：详情页下滑即可关闭
- **点击遮罩关闭**：点击空白区域关闭弹窗
- **卡片点击展开**：进入详情抽屉

### 即时反馈
- **Toast 提示**：操作成功/失败即时提示
- **动画过渡**：页面切换、状态变化均有动画
- **按钮状态**：加载中、禁用状态明确

---

## 💾 数据存储

### IndexedDB 优势
- **容量大**：不受 5MB 限制
- **性能好**：异步读写，不阻塞 UI
- **结构化**：支持索引和查询
- **持久化**：卸载应用前数据一直保留

### 自动迁移
- 首次启动自动从旧版 localStorage 迁移
- 无缝升级，不丢失历史数据

---

## ⌨️ 快捷键支持

| 场景 | 快捷键 | 功能 |
|------|--------|------|
| 添加食物 | Enter | 确认添加 |
| 添加食物 | Esc | 取消添加 |
| 抽屉 | 下滑手势 | 关闭抽屉 |

---

## 📊 性能优化

### 状态管理
- Zustand 细粒度订阅
- Selector 模式避免不必要重渲染
- 防抖写入减少 I/O

### 组件优化
- React.memo 纯组件
- useMemo 缓存计算结果
- 懒加载减少首屏时间

---

## 🔒 隐私说明

- 所有数据存储在本地 IndexedDB
- 无需登录，不收集个人信息
- 导出数据完全由用户控制

---

## 💡 使用技巧

1. **快速打卡**：在首页卡片上直接点击食物名称打勾
2. **批量操作**：进入抽屉后使用"一键全部完成"
3. **临时调整**：点击"+ 添加临时食物"记录计划外食物
4. **切换方案**：左右滑动或点击套餐芯片切换
5. **查看历史**：在"数据"页日历中点击日期查看

---

## 🚀 技术栈

- **前端**：React 18 + TypeScript + Vite
- **状态管理**：Zustand
- **数据存储**：IndexedDB (idb 库)
- **路由**：React Router (Hash 模式)
- **移动端**：Capacitor 6
- **样式**：原生 CSS + CSS Variables
